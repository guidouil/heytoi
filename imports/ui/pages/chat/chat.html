<template name="chat">
  <div class="ui divider horizontal"></div>
  <a href="/">
    <img src="/img/rond.svg" class="ui centered small image">
  </a>
  <button class="ui right floated red circular basic icon button" id="deleteMessages" data-tooltip="Supprimer les messages" data-position="left center" data-inverted=""><i class="trash icon"></i></button>
  <div class="ui divider horizontal clearing"></div>
  <div class="ui raised segment" id="chat">
    {{#unless chat}}
      <div class="ui active dimmer">
        <div class="ui big text loader">Chargement</div>
      </div>
    {{else}}
      {{#if chat.deleted}}
        <h1 class="ui center aligned header">
          Les {{chat.counter}} messages de cette conversation ont √©t√© effac√©s.
          <div class="sub header">Plus de conversation entre toi et moi ici.</div>
        </h1>
      {{else}}
        <div class="ui comments" id="comments">
          {{#each chat.messages}}
            <div class="comment">
              <a class="avatar">
                <img src="/img/{{from}}.svg">
              </a>
              <div class="content">
                <a class="author">{{from}}</a>
                <div class="metadata">
                  <span class="date">{{fromNow date}}</span>
                </div>
                <div class="text">
                  {{text}}
                </div>
              </div>
            </div>
          {{/each}}
        </div>
        <div class="ui large basic modal" id="deleteMessagesModal">
          <div class="ui icon header">
            <i class="trash icon"></i>
            Hey Toi,<br>
            Tu veux vraiment effacer les messages ?
          </div>
          <div class="content centerthis">
            <p>Tous les messages de cette conversation seront supprim√©s imm√©diatement et d√©finitivement. Es-tu s√ªr de vouloir mettre fin √† cette conversation ?</p>
          </div>
          <div class="actions centerthis">
            <div class="ui cancel inverted button">
              <i class="undo icon"></i>
              Non
            </div>
            <div class="ui red ok inverted button">
              <i class="trash icon"></i>
              Oui
            </div>
          </div>
        </div>
      {{/if}}
    {{/unless}}
  </div>

  <div class="ui bottom fixed borderless inverted menu">
    <div class="ui container">
      <form class="ui form" id="newMessage">
        <div class="field">
          <div class="ui fluid icon input" id="messageInput">
            <input type="text" name="message" id="message" placeholder="Dis quelque chose de gentil üôÇ">
            <i class="comment icon" id="newMessageIcon"></i>
          </div>
        </div>
      </form>
    </div>
  </div>

</template>
